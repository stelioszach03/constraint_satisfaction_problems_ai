"""
Οπτικοποίηση Γράφου Αποστάσεων για Απλό Χρονικό Πρόβλημα
"""
import graphviz

def create_distance_graph():
    # Δημιουργία νέου κατευθυνόμενου γράφου
    dot = graphviz.Digraph(comment='Γράφος Αποστάσεων για το Χρονικό Πρόβλημα Μαρίας-Ελένης')
    dot.attr(rankdir='LR')

    # Προσθήκη κόμβων για τα γεγονότα
    events = ['ML', 'MA', 'EL', 'EA']
    labels = {
        'ML': 'Αναχώρηση\nΜαρίας',
        'MA': 'Άφιξη\nΜαρίας',
        'EL': 'Αναχώρηση\nΕλένης',
        'EA': 'Άφιξη\nΕλένης'
    }

    for event in events:
        dot.node(event, labels[event])

    # Προσθήκη ακμών με περιορισμούς
    # Χρονικό παράθυρο αναχώρησης Μαρίας (0 ≤ ML ≤ 10)
    dot.edge('ML', 'ML', '0', constraint='false')

    # Χρόνος μετακίνησης Μαρίας (30 ≤ MA-ML ≤ 40)
    dot.edge('ML', 'MA', '40')
    dot.edge('MA', 'ML', '-30')

    # Η Ελένη φτάνει 15 λεπτά μετά τη Μαρία (EA-MA = 15)
    dot.edge('MA', 'EA', '15')
    dot.edge('EA', 'MA', '-15')

    # Χρόνος μετακίνησης Ελένης (5 ≤ EA-EL ≤ 15)
    dot.edge('EL', 'EA', '15')
    dot.edge('EA', 'EL', '-5')

    # Αποθήκευση του γράφου
    dot.render('distance_graph', format='png', cleanup=True)

    return """
Περιγραφή Γράφου Αποστάσεων:

1. Κόμβοι (Γεγονότα):
   - ML: Αναχώρηση Μαρίας (μεταξύ 8:00-8:10)
   - MA: Άφιξη Μαρίας
   - EL: Αναχώρηση Ελένης
   - EA: Άφιξη Ελένης

2. Ακμές (Χρονικοί Περιορισμοί):
   α) Αυτο-βρόχος στο ML: d(ML,ML) = 0
      Αναπαριστά τον περιορισμό του χρονικού παραθύρου αναχώρησης της Μαρίας

   β) Μεταξύ ML και MA:
      - d(ML,MA) = 40  (μέγιστος χρόνος μετακίνησης)
      - d(MA,ML) = -30 (ελάχιστος χρόνος μετακίνησης)
      Μαζί επιβάλλουν: 30 ≤ MA-ML ≤ 40

   γ) Μεταξύ MA και EA:
      - d(MA,EA) = 15
      - d(EA,MA) = -15
      Επιβάλλει: EA-MA = 15 (ακριβώς 15 λεπτά μετά)

   δ) Μεταξύ EL και EA:
      - d(EL,EA) = 15  (μέγιστος χρόνος μετακίνησης)
      - d(EA,EL) = -5  (ελάχιστος χρόνος μετακίνησης)
      Μαζί επιβάλλουν: 5 ≤ EA-EL ≤ 15

3. Ιδιότητες Γράφου:
   - Οι κατευθυνόμενες ακμές αναπαριστούν χρονικούς περιορισμούς
   - Τα βάρη των ακμών δείχνουν τις μέγιστες χρονικές διαφορές
   - Αρνητικά βάρη για τις ελάχιστες χρονικές διαφορές
   - Δεν υπάρχουν αρνητικοί κύκλοι (το πρόβλημα είναι συνεπές)
   - Όλα τα μονοπάτια αναπαριστούν έγκυρους χρονικούς περιορισμούς

4. Επαλήθευση Περιορισμών:
   Ο γράφος μοντελοποιεί σωστά όλους τους περιορισμούς του προβλήματος:
   - Χρονικό παράθυρο αναχώρησης Μαρίας (8:00-8:10)
   - Διάρκεια μετακίνησης Μαρίας (30-40 λεπτά)
   - Άφιξη Ελένης (15 λεπτά μετά τη Μαρία)
   - Διάρκεια μετακίνησης Ελένης (5-15 λεπτά)
"""

if __name__ == "__main__":
    print(create_distance_graph())
